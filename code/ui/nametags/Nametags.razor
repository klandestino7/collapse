@using System;
@using System.Linq;
@using Sandbox;
@using Sandbox.UI;
@using NxtStudio.Collapse;

@namespace NxtStudio.Collapse.UI
@attribute [StyleSheet( "/ui/nametags/Nametags.scss" )]
@inherits Panel

@{
    if ( !CollapsePlayer.Me.IsValid() ) return;
}

<root>
    @{
        var players = Entity.All.OfType<INametagProvider>();
    }

    @foreach ( var p in players )
    {
        <Nametag Provider=@p></Nametag>
    }
</root>

@code
{
    protected override int BuildHash()
    {
        var players = Entity.All.OfType<INametagProvider>();
        return HashCode.Combine( players.Count() );
    }
}
